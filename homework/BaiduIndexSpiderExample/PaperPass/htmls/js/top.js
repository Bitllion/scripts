(function(z,E){E(function(){var t=z.operateState.getHeaderState(Report.report_id);var n=E(".report_number").html();i(t);E(".HeaderButton").click(function(){var t=E(".paper-header").css("display");z.operateState.saveHeaderState(Report.report_id,t);i(t);R()});function i(t){var i="";if(t=="block"||t==""){E(".paper-header").css("display","none");E(".tab").css("padding-right","0px");E(".clickimg").css("background-position","-13px -98px");E("#m-content").css("top","40px");E(".report_number").css({display:"flex","justify-content":"flex-start","justify-items":"center"});E(".tab_img").attr("src","htmls/images/header_logo.png");E(".dropdown-menu ul").css("top","40px");var e=E(".similarNum").html();var a=E(".nav-detail-similar .progress").html();var s=E(".report_number a").attr("href");i+=`<div class="report_number"><a href="${s}" target="_blank" class="g-btn g-btn-default g-btn-sm transparent" style="margin-top:-4px;">查询真伪</a></div><div style="color:#e6e6e6" class="ML20">总体相似度：</div><div style="width:80px;height:40px;line-height:40px;margin-right:10px;padding-top:3px;"><div class="progress">${a}</div>	</div><div style="color:#e6e6e6;display:inline-block">${e}</div>`}else{E(".paper-header").css("display","block");E(".tab").css("padding-right","113px");E(".clickimg").css("background-position","-73px -98px");E("#m-content").css("top","140px");E(".report_number").css("padding-left","0px");E(".tab_img").attr("src","");E(".dropdown-menu ul").css("top","140px");i=n}E(".report_number").html(i)}var e=z.operateState.getALink(Report.report_id);var r=z.operateState.getTabName(Report.report_id);var a=z.operateState.getFoldState(Report.report_id);l(r);s();function s(){var n=document.documentElement.clientWidth;E("#nav_ul li").each(function(t,i){var e=["详细报告","文字校审","综合评估","查看原文","打印PDF","智能降重","使用帮助"];var a=["详细","校审","评估","原文","PDF","降重","帮助"];var s=E(this).find("a").html();if(n>1280){E(this).find("a").html(e[a.indexOf(s)]);E(".nav_tip").remove();E(".tab li a").css("padding","0 20px");E(".nav-tit h4").css("font-size","20px")}else{E(this).find("a").html(a[e.indexOf(s)]);if(E(this).find(".nav_tip").length<1){E(this).append('<div class="nav_tip">'+e[e.indexOf(s)]+"</div>")}E(".tab li a").css("padding","0 10px");E(".nav-tit h4").css("font-size","16px")}});E("#nav_ul li").mousemove(function(){E(this).find(".nav_tip").css("display","block")}).mouseout(function(){E(this).find(".nav_tip").css("display","none")})}E("#childIframe").attr("src",e);E(".active_li").each(function(){if(E(this).children("a").text()==r){E(this).addClass("active");E(this).siblings().removeClass("active")}});E(".active_li").click(function(){var t=E(this).children("a").attr("href");r=E(this).children("a").text();z.operateState.saveALink(Report.report_id,t);z.operateState.saveTabName(Report.report_id,r);l(r)});E("#m-nav a").click(function(){E("#detail_report").css("visibility","hidden");E("#proof_detail_report").css("visibility","hidden");E("#page_navigation").css("visibility","hidden")});function l(t){var i=`<div class="layui_fixed_layer"></div><div class="layui-layer-shade main_shade"><div class="layui-layer layui-layer-page main_layer"><div class="layui-layer-content">正在加载报告，请稍等...</div></div></div>`;if(t==""||t=="详细报告"||t=="详细"){E("#m-content").append(i);a=z.operateState.getFoldState(Report.report_id)}if(t=="文字校审"||t=="校审"){E("#m-content").append(i);o();a=z.operateState.getFoldState2(Report.report_id)}d(a);j(a);R()}function o(){var t="";t+=`<div class="layui_right_shade"><div class="layui_right_layer"><div class="layui-layer-content" style="font-size:14px;padding:0">正在加载校审结果，请稍等...</div></div></div>`;E("#m-content").append(t)}function d(t){if(t=="none"){E(".main_shade").css("width","100%")}else{E(".main_shade").css("width","70%")}}E(".download-format").click(function(){E(this).find(".dropdown-menu").toggle()});E(".download_img").mousemove(function(){E(this).next(".detailed_description").css("display","block")}).mouseout(function(){E(this).next(".detailed_description").css("display","none")});if(typeof is_online_view!="undefined"&&is_online_view){var c=E(".xm-smart-rewrite a").attr("href").replace("{{pid}}",Report.report_id)}else{var c="https://www.xiaomo.com/reWrite"}E(".xm-smart-rewrite a").attr("href",c);function p(t){var i="";i+='<div class="layui-nav bookmark" id="'+t+'">'+'<div class="layui-nav-child layui-bg-white">'+'<div class="lauyui_tit">'+'<div class="lauyui_tit_left">'+'<div class="tit_left">目录导航</div>'+'<div class="mclick_show Pointer">'+'<span style="margin-right:2px">[</span>'+'<span class="mclick_span">全部展开</span>'+'<i class="g-arrow-i"></i>'+'<span style="margin-left:12px">]</span>'+"</div>"+"</div>"+'<div class="m_close Pointer">'+'<span class="layui-layer-setwin">'+'<a class="layui-layer-ico layui-layer-close layui-layer-close1" href="javascript:;"></a>'+"</span>"+"</div>"+"</div>"+'<div class="Bookmark_container">'+'<div class="overflow_ul">'+"</div>"+"</div>"+"</div>"+"</div>";E("#m-content").append(i)}function v(t){var e="";if(t.length==0){E("#detail_report .mclick_show").hide();e+='<div class="isNull" style="padding-top: 20px;margin-left:-20px">'+"目录导航为空"+"</div>"}else{t.forEach(t=>{var i=typeof t.children!="undefined"&&t.children&&t.children.length?v(t.children):null;if(i!=null){e+='<div class="layui-nav-third-child layui-bg-white">'+'<div class="mselect_left">'+'<div class="mselect_img select_img_detail"></div>'+'<div class="mselect_tit">'+'<a href="htmls/standard_report.html'+t.anchorPoint+'" target="left" class="third-class">'+t.content+"</a>"+"</div>"+"</div>"+i+"</div>"}else{e+='<div class="layui-nav-third-child layui-bg-white">'+'<div class="mselect_left ">'+'<div class="mselect_tit leftImg_none">'+'<a href="htmls/standard_report.html'+t.anchorPoint+'" target="left" class="third-class">'+t.content+"</a>"+"</div>"+"</div>"+"</div>"}})}return e}function h(t){var e="";if(t.length==0){E("#proof_detail_report .mclick_show").hide();e+='<div class="isNull" style="padding-top: 20px;margin-left:-20px">'+"目录导航为空"+"</div>"}else{t.forEach(t=>{var i=typeof t.children!="undefined"&&t.children&&t.children.length?h(t.children):null;if(i!=null){e+='<div class="layui-nav-third-child layui-bg-white">'+'<div class="mselect_left">'+'<div class="mselect_img select_img_detail"></div>'+'<div class="mselect_tit">'+'<a href="htmls/standard_proof.html'+t.anchorPoint+'" target="left" class="third-class">'+t.content+"</a>"+"</div>"+"</div>"+i+"</div>"}else{e+='<div class="layui-nav-third-child layui-bg-white">'+'<div class="mselect_left ">'+'<div class="mselect_tit leftImg_none">'+'<a href="htmls/standard_proof.html'+t.anchorPoint+'" target="left" class="third-class">'+t.content+"</a>"+"</div>"+"</div>"+"</div>"}})}return e}function f(t){return JSON.stringify(JSON.parse(t)).replace(/</g,"&lt;").replace(/>/g,"&gt;")}p("detail_report");var m=JSON.parse(f(detail_json));tree=v(m);E("#detail_report .overflow_ul").html(tree);E("#detail_report .overflow_ul").children(".layui-nav-third-child").removeClass("layui-bg-white").removeClass("layui-nav-third-child");p("proof_detail_report");var g=JSON.parse(f(proof_detail_json));proof=h(g);E("#proof_detail_report .overflow_ul").html(proof);E("#proof_detail_report .overflow_ul").children(".layui-nav-third-child").removeClass("layui-bg-white").removeClass("layui-nav-third-child");E(".third-class").each(function(){var t=40;var i=E(this).text().trim();var e=i.length;if(e>t){E(this).html(i.substring(0,t)+"...")}});if(E(".layui-nav-third-child").length==0){E(".mclick_show").hide()}E(".mclick_show").click(function(){var t=E(this).parents(".layui-nav-child").find(".layui-nav-third-child");var i=E(this).parents(".layui-nav-child").find(".mselect_img");if(t.is(":hidden")){if(E(this).find(".mclick_span").text()=="全部收起"){t.hide();i.css("background-position","-115px -245px");E(this).find(".mclick_span").text("全部展开");E(this).find("i.g-arrow-i").css({"border-color":"#56b282 transparent transparent",top:"18px"});i.removeClass("opened")}else{t.show();i.css("background-position","-77px -245px");E(this).find(".mclick_span").text("全部收起");E(this).find("i.g-arrow-i").css({"border-color":"transparent transparent #56b282",top:"13px"});i.addClass("opened")}}else{t.hide();i.css("background-position","-115px -245px");E(this).find(".mclick_span").text("全部展开");E(this).find("i.g-arrow-i").css({"border-color":"#56b282 transparent transparent",top:"18px"});i.removeClass("opened")}});E(".mselect_img").on("click",function(){var t=E(this).parent().siblings(".layui-nav-third-child");if(E(this).hasClass("opened")){t.hide();t.find(".mselect_img").removeClass("opened");t.find(".mselect_img").css("background-position","-115px -245px");E(this).css("background-position","-115px -245px");E(this).removeClass("opened")}else{t.show();E(this).css("background-position","-77px -245px");E(this).addClass("opened")}});E(".select_img_detail").click(function(){var e=true;var t=E(this).parents(".layui-nav-child");t.find(".select_img_detail").each(function(t,i){if(!E(i).hasClass("opened")){e=false}});if(e){t.find(".mclick_span").text("全部收起");t.find("i.g-arrow-i").css({"border-color":"transparent transparent #56b282",top:"13px"})}else{t.find(".mclick_span").text("全部展开");t.find("i.g-arrow-i").css({"border-color":"#56b282 transparent transparent",top:"18px"})}});E(".mselect_tit").mousemove(function(){E(this).css("background","#f2f2f2")}).mouseout(function(){E(this).css("background","transparent")});E(".m_close").click(function(){E("#detail_report").css("visibility","hidden")});function u(t){var i="";i+='<div class="layui-nav bookmark page_nav" id="'+t+'">'+'<div class="layui-bg-gray layui-page-nav-child">'+'<div class="book-mark-header">'+'<div class="lauyui_tit_left">'+'<div class="tit_left">页面导航</div>'+'<ul class="nav-btns clearfix">'+'<li><span></span></li><li class="active"><span></span></li><li><span></span></li>'+"</ul>"+"</div>"+'<div class="m_close Pointer">'+'<span class="layui-layer-setwin">'+'<a class="layui-layer-ico layui-layer-close layui-layer-close1" href="javascript:;"></a>'+"</span>"+"</div>"+"</div>"+'<div class="overflow_ul"><div id="mbxsgxktna" style="width: 284px;"></div></div>'+"</div>"+"</div>";E("#m-content").append(i)}u("page_navigation");function _(t){if(t==""){E(".nav-btns").hide();t+='<div class="isNull">'+"页面导航为空"+"</div>"}else{E(".nav-btns").show()}return t}var y=document.getElementById("childIframe");var b=document.createElement("style");E("head").append(b);function x(t,i){E("style").html(i);var e=_(t);E("#mbxsgxktna").html(e);var a=document.querySelectorAll(".upkmzjakmc");E.each(a,function(){E(this).css("transform","scale(1)");var t=this.getBoundingClientRect().width;var i=this.getBoundingClientRect().height;var e=t/i;var a=155/i;var s=110/t;if(e<793.33/1121.33){E(this).css("transform","scale("+a+")")}else{E(this).css("transform","scale("+s+")")}t=this.getBoundingClientRect().width;i=this.getBoundingClientRect().height;E(this).parent(".jcjymywwzd").css("width",Math.ceil(t));E(this).parent(".jcjymywwzd").css("height",i);w();var n=E(this).parent(".jcjymywwzd").attr("id");var r='<div class="page-nav-id">'+n+"</div>";E(this).parent(".jcjymywwzd").append(r)});E("#Add_height").remove()}function w(){E.each(E(".jcjymywwzd"),function(t,i){var e=this.getBoundingClientRect().width;var a=(112-e)/2+15;E(this).css("margin-left",a).css("margin-right",a)})}function k(i,e){E(".jcjymywwzd").removeClass("active");E(".upkmzjakmc").each(function(t){if(i==t+1){E(this).parent(".jcjymywwzd").addClass("active");if(e=="false"){if(this.nextElementSibling!=null)this.nextElementSibling.scrollIntoView(false)}y.contentWindow.postMessage({page_nav_click:"false"},"*")}});w()}E(document).on("click",".nav-btns li",function(){E(this).siblings().removeClass("active");E(this).addClass("active");E("#page_navigation").find("li").each(function(t,i){var t=t+1;if(t==1&&E(this).hasClass("active")){E("#page_navigation").find("#mbxsgxktna").css("width","142px");S(t)}else if(t==2&&E(this).hasClass("active")){E("#page_navigation").find("#mbxsgxktna").css("width","284px");S(t)}else if(t==3&&E(this).hasClass("active")){E("#page_navigation").find("#mbxsgxktna").css("width","426px");S(t)}})});function S(t){var i=z.operateState.getTabName(Report.report_id);var e=z.operateState.getInitPage(Report.report_id);var a=z.operateState.getProofInitPage(Report.report_id);if(i=="详细报告"||i=="详细"||i==""){if(e=="switch_word"||e==""){z.operateState.savePageNavState(Report.report_id,t)}else{z.operateState.savePTPageNavState(Report.report_id,t)}}else{if(a=="proof_switch_word"||a==""){z.operateState.saveProofNavState(Report.report_id,t)}else{z.operateState.saveProofPtNavState(Report.report_id,t)}}}function C(){var t=z.operateState.getTabName(Report.report_id);var i=z.operateState.getInitPage(Report.report_id);var e=z.operateState.getProofInitPage(Report.report_id);if(t=="详细报告"||t=="详细"||t==""){if(i=="switch_word"||i==""){return z.operateState.getPageNavState(Report.report_id)}else{return z.operateState.getPTPageNavState(Report.report_id)}}else{if(e=="proof_switch_word"||e==""){return z.operateState.getProofNavState(Report.report_id)}else{return z.operateState.getProofPtNavState(Report.report_id)}}}E(document).delegate(".upkmzjakmc","click",function(){E(".jcjymywwzd").removeClass("active");E(this).parent(".jcjymywwzd").addClass("active");var t=E(this).parent(".jcjymywwzd").attr("id");var i={EnterId:t,page_nav_click:"true"};y.contentWindow.postMessage(i,"*");w()});function P(t){E("#page_navigation").find(".nav-btns li").each(function(){if(E(this).hasClass("active")){E(this).removeClass("active")}});if(t=="1"){E("#page_navigation").find(".nav-btns li:first-child").addClass("active");E("#page_navigation").find("#mbxsgxktna").css("width","142px")}else if(t=="2"||t==""){E("#page_navigation").find(".nav-btns li:nth-child(2)").addClass("active");E("#page_navigation").find("#mbxsgxktna").css("width","284px")}else if(t=="3"){E("#page_navigation").find(".nav-btns li:last-child").addClass("active");E("#page_navigation").find("#mbxsgxktna").css("width","426px")}}j(a);R();function j(t){var i=document.documentElement.clientWidth;if(t=="none"){E(".bookmark").css({width:i*.29,left:"auto",right:"72px"})}else{E(".bookmark").css({width:i*.29,left:i*.7-30,right:"auto"})}}function R(){var t=document.documentElement.clientHeight;var i=E(".paper-header").css("display");if(i=="block"){E(".overflow_ul").css("height",t-220)}if(i=="none"){E(".overflow_ul").css("height",t-120)}}E(".m_close").click(function(){E("#detail_report").css("visibility","hidden");E("#proof_detail_report").css("visibility","hidden");E("#page_navigation").css("visibility","hidden");var t={visibility:"hidden"};y.contentWindow.postMessage(t,"*")});var N=z.Paper.textSectionSave(null);E(document).on("click","[tpl-section-save=btn]",function(){N.call(this)});E(document).on("click","[tpl-section-cancle=btn],[tpl-section-save=btn],.layui-layer-setwin",function(){E("#section-edit-modal").css("display","none");E("#modify-document-modal").css("display","none")});window.addEventListener("message",function(t){E("#detail_report").css("visibility",t.data.state1);E("#proof_detail_report").css("visibility",t.data.state3);E("#page_navigation").css("visibility",t.data.navState);if(t.data=="text"){E("#detail_report").css("visibility","hidden");E("#proof_detail_report").css("visibility","hidden")}if(t.data=="Page_Loading"){E(".main_shade").remove();E(".layui_fixed_layer").remove()}if(t.data=="Page_Loading_Right"){E(".layui_right_shade").remove()}if(t.data=="switch"){l(r);E("#detail_report").css("visibility","hidden");E("#proof_detail_report").css("visibility","hidden");E("#page_navigation").css("visibility","hidden")}if(t.data.bodyDOM&&t.data.sheetCSS){x(t.data.bodyDOM,t.data.sheetCSS)}if(t.data.navState=="visible"){var i=C();P(i);k(t.data.pageNum,"false")}if(t.data.PageNum){k(t.data.PageNum,t.data.page_nav_click)}if(t.data.FoldState||t.data.FoldState==""){j(t.data.FoldState)}if(t.data.section_edit){E("#section-edit-modal").css("display","block");var e=JSON.parse(f(section_edit_json));var a=t.data.section_edit.trim();E(".section-txt.section-txt-prev").text("");E.each(e[a],function(t,i){if(i.score>=.4&&i.score<.7){var e=E('<span class="orange">'+i.content+"</span>")}else if(i.score>=.7){var e=E('<span class="red">'+i.content+"</span>")}else{var e=E("<span>"+i.content+"</span>")}E(".section-txt.section-txt-prev").append(e)});E(".section-id").text(a);var s=z.Paper.textSectionEdit();s.call(this)}if(t.data.modify_document){E("#modify-document-modal").css("display","block");E("#modifyDocument").attr("src","htmls/view_original_edit.html")}},false);E(window).resize(function(){s();R();j(a)})})})(Report,jQuery);